# WooCommerce API设置指南

## 🚨 解决"API密钥没有写入权限"错误

当您看到类似以下错误时：
```
API权限不足：La clé de l'API fournie n'a aucun droit en écriture
```

这表示您的API密钥权限不足，需要重新设置。

## 📋 完整设置步骤

### 1. 登录WordPress后台

登录您的WordPress网站管理后台。

### 2. 导航到WooCommerce API设置

按以下路径操作：
```
WooCommerce → 设置 → 高级 → REST API
```

### 3. 创建新的API密钥

1. **点击"添加密钥"按钮**
2. **填写密钥信息**：
   - **描述**：输入一个描述性名称（如："库存分析系统"）
   - **用户**：选择具有管理员权限的用户
   - **权限**：⚠️ **重要：必须选择"读/写"**

### 4. 权限设置详解

| 权限类型 | 说明 | 是否需要 |
|---------|------|---------|
| 读取 | 只能查询数据 | ❌ 不够 |
| 写入 | 只能修改数据 | ❌ 不够 |
| **读/写** | 可以查询和修改数据 | ✅ **必须选择** |

### 5. 生成并保存密钥

1. 点击"生成API密钥"
2. **重要**：立即复制并保存以下信息：
   - Consumer Key (ck_...)
   - Consumer Secret (cs_...)
   
   ⚠️ 密钥只会显示一次，请妥善保存！

### 6. 在系统中更新配置

1. 打开我们的库存分析系统
2. 进入"网站配置"页面
3. 更新以下字段：
   - **网站URL**：确保格式正确（如：https://yoursite.com）
   - **Consumer Key**：粘贴新生成的密钥
   - **Consumer Secret**：粘贴新生成的密钥

### 7. 测试配置

1. 保存配置后，尝试进行库存同步
2. 如果仍有错误，检查以下项目：

## 🔍 常见问题排查

### 问题1：仍然提示权限错误
**解决方案**：
- 确认API密钥权限设置为"读/写"
- 检查选择的用户是否有管理员权限
- 重新生成API密钥

### 问题2：找不到产品
**解决方案**：
- 确认产品SKU在WooCommerce中存在
- 检查产品是否已发布
- 验证SKU字段没有额外的空格

### 问题3：网站URL错误
**解决方案**：
- 确保URL格式正确（包含https://或http://）
- 去除URL末尾的斜杠
- 确认网站可以正常访问

### 问题4：SSL证书问题
**解决方案**：
- 确保网站使用有效的SSL证书
- 如果是自签名证书，可能需要额外配置

## 📞 技术支持

如果按照以上步骤仍无法解决问题，请检查：

1. **WordPress版本**：确保使用最新版本
2. **WooCommerce版本**：确保使用最新版本
3. **服务器配置**：检查是否有防火墙阻止API请求
4. **插件冲突**：暂时禁用其他插件测试

## 🔐 安全建议

1. **定期更换API密钥**
2. **只给必要的权限**
3. **使用HTTPS连接**
4. **不要在公共场所暴露API密钥**

---

**需要帮助？** 请联系技术支持或查看WooCommerce官方文档。 