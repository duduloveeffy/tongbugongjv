# 库存同步功能说明

## 🎯 功能概述

库存同步功能允许您直接在系统中修改WooCommerce产品的库存状态，实现快速的库存管理。

## 🎨 界面显示

### 状态样式
- **已上架**：蓝色标签
- **未上架**：🔴 红色标签
- **有货**：蓝色标签  
- **无货**：🔴 红色标签
- **缺货**：🔴 红色标签

### 同步按钮颜色
- 🔴 **红色按钮**：有货但净库存<0，建议同步为无货
- 🔵 **蓝色按钮**：无货但净库存>0，建议同步为有货
- ⚪ **灰色按钮**：状态正常，可正常切换

## 🚀 功能特性

### 1. 单个同步
- **所有SKU都可以同步**：无论当前状态如何
- **一键切换**：点击按钮即可切换有货/无货状态
- **智能提示**：按钮颜色提示最佳同步方向

### 2. 批量同步
- **多选功能**：所有SKU都可以选择
- **批量切换**：选中的SKU将切换为相反状态
- **状态预览**：显示将要切换的状态

### 3. 智能建议
- **净库存分析**：根据净可售库存给出建议
- **颜色区分**：不同情况使用不同颜色提示
- **灵活操作**：建议不限制操作，所有状态都可切换

## 🔧 技术实现

### 同步内容
- ✅ **修改库存状态**：有货(instock) ↔ 无货(outofstock)
- ❌ **不修改库存数量**：保持原有数量不变
- ❌ **不修改库存管理**：保持原有设置不变

### 产品类型支持
- ✅ **简单产品**：使用标准API端点
- ✅ **变体产品**：自动检测并使用变体API端点
- ✅ **自动识别**：无需手动设置产品类型

## 📋 使用流程

### 单个同步
1. 点击"上架检测"获取产品状态
2. 查看库存状态和按钮颜色
3. 点击同步按钮切换状态
4. 系统自动更新状态

### 批量同步
1. 点击"上架检测"获取产品状态
2. 选择需要同步的SKU（复选框）
3. 点击"批量切换库存状态"
4. 系统批量更新选中的SKU状态

## 🎨 操作示例

### 示例1：建议同步无货
```
产品: ABC-001
当前状态: 有货
净库存: -5
按钮颜色: 🔴 红色
按钮文本: 同步无货
建议原因: 有货但净库存<0
```

### 示例2：建议同步有货
```
产品: ABC-002
当前状态: 无货
净库存: 10
按钮颜色: 🔵 蓝色
按钮文本: 同步有货
建议原因: 无货但净库存>0
```

### 示例3：正常状态
```
产品: ABC-003
当前状态: 有货
净库存: 15
按钮颜色: ⚪ 灰色
按钮文本: 同步无货
建议原因: 状态正常，可正常切换
```

## 📊 批量操作说明

### 选择逻辑
- 所有产品都可以选择
- 选中的产品将切换为相反状态
- 有货 → 无货
- 无货 → 有货

### 结果反馈
- 成功数量统计
- 失败数量统计
- 权限错误提示
- 详细错误信息

## 🔍 状态检测

### 检测内容
- 产品上架状态
- 产品库存状态
- 产品基本信息

### 检测结果
- 实时状态显示
- 智能同步建议
- 颜色区分提示

## 🚨 注意事项

1. **API权限**：需要"读/写"权限的WooCommerce API密钥
2. **网络连接**：确保可以访问WordPress网站
3. **产品存在**：确保SKU在WooCommerce中存在
4. **状态更新**：同步后状态会立即更新

## 📚 相关文档

- [WooCommerce API设置指南](./WooCommerce_API_Setup_Guide.md)
- [变体产品同步指南](./Product_Variations_Guide.md)
- [项目README](./README.md)

---

**现在您可以高效地管理WooCommerce产品库存状态！** 🎉 